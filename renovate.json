{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "regexManagers": [
    {
      "fileMatch": ["^clusters/.*/.*\\.yaml$"],
      "matchStrings": [
        "kind: HelmRelease\nmetadata:\n  name: (?<depName>.*)\n  namespace: .*\nspec:\n  releaseName: .*\n  targetNamespace: .*\n  interval: .*\n  chart:\n    spec:\n      chart: (?<packageName>.*)\n      version: (?<currentValue>.*)\n      sourceRef:\n        kind: HelmRepository\n        name: .*\n        namespace: .*"
      ],
      "datasourceTemplate": "helm"
    },
    {
      "fileMatch": ["^clusters/.*/.*\\.yaml$"],
      "matchStrings": [
        "kind: GitRepository\nmetadata:\n  name: .*\n  namespace: .*\nspec:\n  interval: .*\n  ref:\n    tag: (?<currentValue>.*)\n  url: https://github.com/(?<depName>.*)"
      ],
      "datasourceTemplate": "github-releases"
    },
    {
      "fileMatch": ["^clusters/.*/.*\\.yaml$"],
      "matchStrings": [
        "kind: OCIRepository\nmetadata:\n  name: (?<depName>.*)\n  namespace: .*\nspec:\n  interval: .*\n  layerSelector:\n    mediaType: .*\n    operation: .*\n  url: oci://ghcr.io/(?<packageName>.*)\n  ref:\n    tag: (?<currentValue>.*)"
      ],
      "datasourceTemplate": "oci"
    }
  ]
}
